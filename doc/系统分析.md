# 系统性能问题分析

## 多窗口方面：

### Activity的生命周期
设计上问题，Openthos和凤凰相比，流畅度很是问题
经过对比，发现Openthos对Activity的生命周期修改较为严重，甚至是不完整。主要发生在以下两个地方

1）应用最小化
凤凰最小化的时候，还可以保证传统意义上的Activity的生命周期，以释放资源。由可见到不可见，生命周期也会从onResume进入到onPause，onStop。开多个应用的时候，如果其他应用最小化，对Android的性能损耗并不是很大。
而Openthos仅仅是移除到屏幕外侧，并没有生命周期的修改，这样无形中增加了资源的耗费，所以，在Openthos上，开多个应用，会有很明显的卡顿的增加。

2）单应用
Android+键盘的邮件按钮，可以触发邮件APK，在凤凰上，按几十次，上百次，也就是在一个窗口里开几十个上百个邮件的页面，并不会出现卡顿
但在Openthos里则不一样，发现也是生命周期的问题。开新的邮件页面的时候，旧的邮件页面仅仅进入onPause状态，也就是说旧的邮件页面还是继续占用着资源。

### 关闭应用
目前Openthos采用的是杀进程的方式，这种做法其实影响到了应用再次启动的速度。而凤凰并没有采用该做法，建议这块修改，会对性能有较大的提升。
而且杀进程的做法并不友好，比如说网易云音乐，关闭了，音乐就听了，不关闭/最小化，因Activity不会进入onStop状态，桌面歌词并不会出来。

### 总结
个人认为，目前Openthos的渲染速度与其他Android x86对比，并没有速度上差异性的慢，仅仅是因为资源的不足导致的卡顿。
且以上几个问题在Openthos1.1可能如同顽疾，解决起来难度相当大

## 系统方面：

1.Wifi 之前测试，wifi有少许的性能影响。目前我还没有定位到问题的所在

2.SystemUI在无动作情况下不停的渲染界面，经过核实，问题出在输入法和日历两块地方。这两块地方需要重构。

3.文件管理器，界面设计复杂，后面会对此优化。

4.云服务，长时间放置，会发现后台产生了大量的进程，少许拖慢系统

## IO操作卡顿

大量文件的IO操作，在Android上是会产生卡顿问题。但某些情况下卡顿比较明显，经过核查，文件管理器文件监听FileObserver有着严重问题，需要重新做。
